<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>YouTube to MP3 Converter</title>
  </head>
  <body>
    <h1>YouTube to MP3 Converter</h1>
    <input type="text" id="urlInput" placeholder="Enter YouTube video URL" />
    <button onclick="convert()">Convert</button>
    <div id="status"></div>
    <a id="downloadLink" style="display:none"></a>
    <script>
      async function convert() {
        const url = document.getElementById("urlInput").value;
        const status = document.getElementById("status");
        status.innerHTML = "Converting...";

        try {
          const response = await fetch(`/convert?url=${url}`);
          const data = await response.json();
          if (data.error) {
            status.innerHTML = `Error: ${data.error}`;
          } else {
            const downloadLink = document.getElementById("downloadLink");
            downloadLink.href = data.downloadUrl;
            downloadLink.download = data.fileName;
            downloadLink.style.display = "block";
            status.innerHTML = "Conversion complete!";
          }
        } catch (error) {
          status.innerHTML = `Error: ${error.message}`;
        }
      }
    </script>
  </body>
</html>
